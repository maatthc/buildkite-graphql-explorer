(this["webpackJsonpbuildkite-graphql-explorer"]=this["webpackJsonpbuildkite-graphql-explorer"]||[]).push([[0],{177:function(e,t,n){e.exports=n(273)},182:function(e,t,n){},270:function(e,t,n){},273:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(47),o=n.n(i),l=(n(182),n(118)),u=n(52),c=n(53),s=n(70),h=n(176),d=n(174),p=n(60),f=n(42),m=n(112),g=n(274),y=n(77),k=n.n(y),v=n(286),E=n(285),b=n(287),S=n(288),O=n(1);function x(e){for(var t=e;Object(O.U)(t);)t=t.ofType;return t}function q(e,t){var n=x(e.type);return!(!n.name.startsWith("GitHub")||!n.name.endsWith("Connection")||"first"!==t.name&&"orderBy"!==t.name)}function w(e,t,n){var a=x(e.type);switch(a.name){case"GitHubRepository":if("name"===t.name)return{kind:"StringValue",value:"graphql-js"};if("owner"===t.name)return{kind:"StringValue",value:"graphql"};break;case"NpmPackage":if("name"===t.name)return{kind:"StringValue",value:"graphql"};break;default:if(Object(O.E)(n)&&a.name.startsWith("GitHub")&&a.name.endsWith("Connection")){if("direction"===t.name&&n.getValues().map((function(e){return e.name})).includes("DESC"))return{kind:"EnumValue",value:"DESC"};if("field"===t.name&&n.getValues().map((function(e){return e.name})).includes("CREATED_AT"))return{kind:"EnumValue",value:"CREATED_AT"}}return k.a.defaultValue(n)}return k.a.defaultValue(n)}var C;n(268),n(269),n(270);function j(e){return C?fetch("https://graphql.buildkite.com/v1",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(C)},body:JSON.stringify(e)}).then((function(e){return e.text()})).then((function(e){try{return JSON.parse(e)}catch(t){return e}})):Promise.resolve("")}var T=function(e){Object(h.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e))._graphiql=void 0,a.state={query:'# shift-option/alt-click on a query below to jump to it in the explorer\n# option/alt-click on a field in the explorer to select all subfields\nquery MyQuery {\n    organization(slug: "") {\n      name\n      teams(first: 10) {\n        edges {\n          node {\n            name\n          }\n        }\n      }\n    }\n  }',explorerIsOpen:!0,show:!1,token:""},a._handleInspectOperation=function(e,t){var n=Object(f.a)(a.state.query||"");if(!n)return console.error("Couldn't parse query document"),null;var r=e.getTokenAt(t),i={line:t.line,ch:r.start},o={line:t.line,ch:r.end},l={start:e.indexFromPos(i),end:e.indexFromPos(o)},u=n.definitions.find((function(e){if(!e.loc)return console.log("Missing location information for definition"),!1;var t=e.loc,n=t.start,a=t.end;return n<=l.start&&a>=l.end}));if(!u)return console.error("Unable to find definition corresponding to mouse position"),null;var c="OperationDefinition"===u.kind?u.operation:"FragmentDefinition"===u.kind?"fragment":"unknown",s="OperationDefinition"===u.kind&&u.name||"FragmentDefinition"===u.kind&&u.name?u.name.value:"unknown",h=".graphiql-explorer-root #".concat(c,"-").concat(s),d=document.querySelector(h);d&&d.scrollIntoView()},a._handleEditQuery=function(e){e=e||"",a.setState({query:e})},a._handleToggleExplorer=function(){a.setState({explorerIsOpen:!a.state.explorerIsOpen})},a._graphiql=new p.a({fetcher:j}),a.handleShow=a.handleShow.bind(Object(s.a)(a)),a.handleSave=a.handleSave.bind(Object(s.a)(a)),a.handleExit=a.handleExit.bind(Object(s.a)(a)),a}return Object(c.a)(n,[{key:"handleSave",value:function(){this.state.token.length<40||(C=this.state.token,this.setState({show:!1}),this.updateSchema())}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"handleExit",value:function(){this.handleSave()}},{key:"onChange",value:function(e){e.preventDefault(),this.setState({[e.target.name]:e.target.value})}},{key:"updateSchema",value:function(){var e=this;C&&j({query:Object(m.a)()}).then((function(t){var n=e._graphiql.getQueryEditor();n.setOption("extraKeys",Object(l.a)(Object(l.a)({},n.options.extraKeys||{}),{},{"Shift-Alt-LeftClick":e._handleInspectOperation})),t.data&&e.setState({schema:Object(g.a)(t.data)})}))}},{key:"componentDidMount",value:function(){C?this.updateSchema():this.handleShow()}},{key:"render",value:function(){var e=this,t=this.state,n=t.query,a=t.schema;return r.a.createElement("div",{className:"graphiql-container"},r.a.createElement(v.a,{show:this.state.show,onHide:this.handleSave,onExit:this.handleExit,backdrop:"static",keyboard:!1,centered:!0},r.a.createElement(v.a.Header,{closeButton:!0},r.a.createElement(v.a.Title,null,"Configuration")),r.a.createElement(v.a.Body,null,r.a.createElement(E.a,{className:"mb-3"},r.a.createElement(b.a,{name:"token",placeholder:"Enter BuildKite API Access Token","aria-label":"Enter 6BuildKite API Access Token","aria-describedby":"basic-addon2",onChange:this.onChange.bind(this)}))),r.a.createElement(v.a.Footer,null,r.a.createElement(S.a,{variant:"primary",onClick:this.handleSave},"Continue"))),r.a.createElement(k.a,{schema:a,query:n,onEdit:this._handleEditQuery,onRunOperation:function(t){return e._graphiql.handleRunQuery(t)},explorerIsOpen:this.state.explorerIsOpen,onToggleExplorer:this._handleToggleExplorer,getDefaultScalarArgValue:w,makeDefaultArg:q}),r.a.createElement(p.a,{ref:function(t){return e._graphiql=t},fetcher:j,schema:a,query:n,response:"No results yet..",onEditQuery:this._handleEditQuery},r.a.createElement(p.a.Toolbar,null,r.a.createElement(p.a.Button,{onClick:function(){return e._graphiql.handlePrettifyQuery()},label:"Prettify",title:"Prettify Query (Shift-Ctrl-P)"}),r.a.createElement(p.a.Button,{onClick:function(){return e._graphiql.handleToggleHistory()},label:"History",title:"Show History"}),r.a.createElement(p.a.Button,{onClick:this._handleToggleExplorer,label:"Explorer",title:"Toggle Explorer"}))))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[177,1,2]]]);
//# sourceMappingURL=main.7a07f63c.chunk.js.map